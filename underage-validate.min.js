class UnderageValidate{#e=[];#i=new Set;#s=new Set;#r={};#t={noErrorMessages:!1,errorMessageClass:"error-message",errorMessageContainerClass:"error-message-container",staticErrorMessages:!1,staticContainerId:"error-message-static-container",noErrorFields:!1,errorFieldClass:"error-field"};#l={email:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/g,password:/^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/g,strongPassword:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/g,securePassword:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#&()\-[{}:;'`,?/\\*~$^+=<>\]]).{10,}$/g};constructor(e){return this.#r={...this.#t},e&&this.#d(e),this}#d(e){if("object"!=typeof e||Array.isArray(e)||null==e)throw new TypeError("Invalid rules object!");return this.#r={...this.#r,...e},this}addField(e,i){if("string"!=typeof e||""===e)throw new TypeError("Invalid field ID!");if("object"!=typeof i||Array.isArray(i)||null==i)throw new TypeError("Invalid rules object!");const s={id:e,rules:i};return this.#e.push(s),this}removeField(e){if("string"!=typeof e||""===e)throw new TypeError("Invalid field ID!");const i=this.#e.find((i=>i.id===e));if(!i||null==i)throw new ReferenceError("Field was not found!");return this.#e.splice(this.#e.indexOf(i),1),this}modifyField(e,i){if("string"!=typeof e||""===e)throw new TypeError("Invalid field ID!");if("object"!=typeof i||Array.isArray(i)||null==i)throw new TypeError("Invalid rules object!");const s=this.#e.find((i=>i.id===e));if(!s||null==s)throw new ReferenceError("Field was not found!");const r={id:e,rules:{...this.#e[this.#e.indexOf(s)].rules,...i}};return this.#e[this.#e.indexOf(s)]=r,this}replaceField(e,i){if("string"!=typeof e||""===e)throw new TypeError("Invalid field ID!");if("object"!=typeof i||Array.isArray(i)||null==i)throw new TypeError("Invalid rules object!");const s=this.#e.find((i=>i.id===e));if(!s||null==s)throw new ReferenceError("Field was not found!");const r={id:e,rules:{...this.#t,...i}};return this.#e[this.#e.indexOf(s)]=r,this}validate(){let e=!0;return this.#n(),this.#e.forEach((i=>{if(!this.#a(i.id))return document.getElementById(i.id).focus(),e=!1})),e}validateField(e){return this.#o(e),this.#a(e)}#a(e){const i=document.getElementById(e);if(!i)throw new ReferenceError(`Could not find ID of "${e}" in document!`);const s=this.#e.find((i=>i.id===e));if(!s)throw new ReferenceError("Field was not added to validator!");const r=s.rules;if(!r||null==r)throw new ReferenceError("No rules added to field!");const t=i.value;if(!r.message||null==r.message||""===r.message||"string"!=typeof r.message)throw new TypeError("Invalid message!",r.message);const l=r.message;if(r.required){if(!t||null==t||""===t)return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.min){if("number"!=typeof r.min&&!Number(r.min))throw new TypeError("Invalid 'min' number!");if(t.length<+r.min)return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.max){if("number"!=typeof r.max&&!Number(r.max))throw new TypeError("Invalid 'max' number!");if(t.length>+r.max)return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.minValue){if("number"!=typeof r.minValue&&!Number(r.minValue))throw new TypeError("Invalid 'minValue' number!");if(!Number(t)||+t<+r.minValue)return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.maxValue){if("number"!=typeof r.maxValue&&!Number(r.maxValue))throw new TypeError("Invalid 'maxValue' number!");if(!Number(t)||+t>+r.maxValue)return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.email){if(!this.#l.email.test(t))return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.password){if(!this.#l.password.test(t))return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.strongPassword){if(!this.#l.strongPassword.test(t))return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.securePassword){if(!this.#l.securePassword.test(t))return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.regex){if("RegExp"!==r.regex.constructor.name)throw new TypeError("Invalid regular expression!");if(!r.regex.test(t))return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}if(r.matching){if(!r.matching||null==r.matching||""===r.matching)throw new TypeError("Invalid matching ID!");const e=document.getElementById(r.matching);if(!e||null==e)throw new ReferenceError(`Could not find ID of "${r.matching}" in document!`);if(e.value!==t)return this.#h(!1,i,l),this.#s.delete(i),this.#i.add(i),!1;this.#i.delete(i),this.#s.add(i)}return!0}getInvalidFields(){return Array.from(this.#i)}getValidFields(){return Array.from(this.#s)}#h(e,i,s){const{noErrorMessages:r,errorMessageClass:t,errorMessageContainerClass:l,staticErrorMessages:d,staticContainerId:n,noErrorFields:a,errorFieldClass:o}=this.#r;if(!e){if(!1===r||null==r){const e=document.createElement("p");if(e.className=t,e.dataset.field=i.id,e.textContent=s,!0===d){const i=document.getElementById(n);if(!i||null==i)throw new ReferenceError(`Could not find ID of "${n}" in document!`);i.appendChild(e)}else{const s=document.querySelectorAll(`.${l}`);if(!s||null==s||0===s.length)throw new ReferenceError(`Could not find class of "${l}" in document!`);for(let r=0;r<s.length;r++)if(this.#f(s[r],i)){s[r].insertBefore(e,i.nextSibling);break}}}!1!==a&&null!=a||i.classList.add(o)}}#o(e){const i=document.getElementById(e),s=i.parentNode;if(i.classList.contains(this.#r.errorFieldClass)&&i.classList.remove(this.#r.errorFieldClass),!1===this.#r.staticErrorMessages){if(s.hasChildNodes())for(let e=0;e<s.children.length;e++)s.children[e].classList.contains(this.#r.errorMessageClass)&&"p"===s.children[e].tagName.toLowerCase()&&s.removeChild(s.children[e])}else{const e=document.getElementById(this.#r.staticContainerId);if(e&&null!=e)for(let s=0;s<e.children.length;s++)e.children[s].classList.contains(this.#r.errorMessageClass)&&"p"===e.children[s].tagName.toLowerCase()&&e.children[s].dataset.field===i.id&&e.removeChild(e.children[s])}}#n(){for(let e=0;e<this.#e.length;e++){const i=document.getElementById(this.#e[e].id),s=i.parentNode;if(i.classList.contains(this.#r.errorFieldClass)&&i.classList.remove(this.#r.errorFieldClass),!1===this.#r.staticErrorMessages){if(s.hasChildNodes())for(let e=0;e<s.children.length;e++)s.children[e].classList.contains(this.#r.errorMessageClass)&&"p"===s.children[e].tagName.toLowerCase()&&s.removeChild(s.children[e])}else{const e=document.getElementById(this.#r.staticContainerId);if(e&&null!=e)for(let s=0;s<e.children.length;s++)e.children[s].classList.contains(this.#r.errorMessageClass)&&"p"===e.children[s].tagName.toLowerCase()&&e.children[s].dataset.field===i.id&&e.removeChild(e.children[s])}}}#f(e,i){for(let s=0;s<e.children.length;s++)if(e.children[s].id===i.id)return!0;return!1}}